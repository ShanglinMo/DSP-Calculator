<!DOCTYPE html>
<html style="background: #1f2439;">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>dsp</title>
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter:400,500,600,700">
    <link rel="stylesheet" href="assets/css/styles.min.css">
</head>

<body style="background: rgba(255,255,255,0);">
    <div class="container" style="text-align: center;">
        <div style="padding: 0;"></div>
    </div>
    <div class="highlight-clean">
        <div class="container">
            <div class="intro">
                <h2 class="text-center" style="color: #cbfaff;text-shadow: 0px 0px 6px #90fbfe;font-weight: 600;font-family: Inter, sans-serif;">戴森球计划计算器</h2>
                <p class="text-center" style="color: rgb(208,250,254);">算点东西吧老板</p>
            </div>
            <div class="buttons"></div>
        </div>
    </div>
    <div>
        <div class="container">
            <div class="row">
                <div class="col-md-4" style="margin-bottom: 8px;"><select style="width: 100%;color: #A9F7FD;font-family: Inter, sans-serif;font-weight: normal;border-color: #A9F7FD;border-radius: 4px;background: rgba(169,247,253,0.18);height: 36px;font-size: 14px;min-width: 100%;max-width: 100%;" autofocus="">
                        <option value="undefined">选择一件物品</option>
                    </select></div>
                <div class="col-md-4" style="margin-bottom: 8px;"><input type="number" style="width: 100%;background: rgba(169,247,253,0.18);border: 1px solid #A9F7FD;border-radius: 4px;height: 36px;color: #A9F7FD;font-size: 14px;font-weight: normal;font-family: Inter, sans-serif;" placeholder="数量"></div>
                <div class="col-md-4"><select style="width: 100%;color: #A9F7FD;font-family: Inter, sans-serif;font-weight: normal;border-color: #A9F7FD;border-radius: 4px;background: rgba(169,247,253,0.18);height: 36px;font-size: 14px;min-width: 100%;max-width: 100%;">
                        <option value="" selected="">每分钟</option>
                    </select></div>
            </div>
            <div class="row">
                <div class="col-md-12" style="text-align: center;margin: 0px;margin-right: 0px;margin-left: 0px;margin-top: 48px;margin-bottom: 0px;"><button class="btn btn-primary" type="button" style="color: #A9F7FD;font-size: 14px;border-radius: 4px;border-style: solid;border-color: #A9F7FD;background: rgba(169,247,253,0.18);height: 42px;text-align: center;width: 100px;">计算</button></div>
            </div>
        </div>
    </div>
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/bootstrap/js/bootstrap.min.js"></script>
    <script src="assets/js/script.min.js"></script>
    <script src="node.js"></script>
</body>
<script>

var recipeList
var supChain

function loadData(){
    var json = (function () {
        var json = null;
        $.ajax({
            'async': false,
            'global': false,
            'url': "data/itemInfo_EN.json",
            'dataType': "json",
            'success': function (data) {
                json = data;
            }
        });
        return json;
    })(); 
    return json.recipes
}
function makeChain(item, amount){
    var parent = new Node(item, amount, recipeList)
    for(var n=0;n<recipeList[item].recipes.length;n++){
            var factor = amount / recipeList[item].recipes[n].production_speed
            var igd = recipeList[item].recipes[n].ingredients
            if(recipeList[item].recipes[n].end){
                for(var i=0;i<igd.length;i++){
                    parent.ingredients[n][i] = new Node(igd[i].name, igd[i].amount*factor, recipeList)
                }
            } else {
                for(var i=0;i<igd.length;i++){
                var child = makeChain(igd[i].name, igd[i].amount*factor)
                parent.ingredients[n][i] = child
                }
            }
        } 
    return parent 
}

recipeList = loadData()
supChain = makeChain("iron_ingot", 120)
console.log(supChain)


</script>
</html>